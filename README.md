# ADNetwork MRAID Promo

Реализован новый способ показа рекламы в СДК рекламной сети.  
Сделано по ТЗ:
https://docs.google.com/document/d/1tyqxMyjS3z-BWMfdZ9On1VGYPfZfQBkCY2JuPFRYBB0/edit#heading=h.5uv601oh5bq3

Это веб приложение, которое показывается в web view.
Приложение размещено на сервере, в ответ на запрос из СДК от сервера в adm приходит html страница, готовая к запуску в окне с web view.

####Состав приложения
<b>index.html</b> - веб страница для запуска приложения  
<b>promo.js</b> - веб приложение  
<b>player.js</b> - плеер для видео  
<b>promo.css</b> - стили  
<b>images</b> - папка с ресурсами

### Изменения в СДК
Для показа нового формата рекламы необходимо внести изменения в СДК:
1) Добавить javascript файл mraid.js. Его реализация будет немного отличаться для каждой платформы. Для примера в этом репозитории размещен файл для iOS.
2) Изменить метод запроса данных. Если мы хотим получить рекламу в виде mraid баннера, то в данных для запроса в объекте imp необходимо указать объект banner. Пример:

"banner" : {
"api" : [
5
],
"w" : 390,
"mimes" : [
"application\/javascript"
],
"ext" : {
"rewarded" : 0
},
"h" : 844
}

####Вызовы из СДК к веб промо
1) При изменении ориентации устройства вызывать  
   "mraid.setScreenSize(\(screenWidth),\(screenHeight),\(isBigScreen))",
где isBigScreen - опционально, это параметр для платформы iOS. Так как на телефонах с экраном без физической кнопки система вставляет отступы с краев экрана.
2) При сворачивании и разворчивании приложения вызывать "mraid.setViewable(\(isViewable ))". Это нужно для остановки/включения видео

####События из веб промо в СДК
Ниже описание того, как это реализовано для для iOS СДК.  
Для передачи сообщений в СДК вызывается метод mraid.invokeSDK, на вход которому подается событие.  

Событие - это объект javascript следующего вида:  
{type:String,
value:String,
urls:[String]
}

Типы событий те же, что и в СДК, к ним добавляются новые :
1) call - позвонить по номеру телефона
2) save - сохранить изображение в галерею




